
<!-- /Page Header -->

<!-- Search Filter -->
<div id="filter_inputs" class="card filter-card">
	<div class="card-body pb-0">
		<div class="row">
			<div class="col-sm-6 col-md-3">
				<div class="form-group">
					<label>Name</label>
					<input type="text" class="form-control" />
				</div>
			</div>
			<div class="col-sm-6 col-md-3">
				<div class="form-group">
					<label>Email</label>
					<input type="text" class="form-control" />
				</div>
			</div>
			<div class="col-sm-6 col-md-3">
				<div class="form-group">
					<label>Phone</label>
					<input type="text" class="form-control" />
				</div>
			</div>
		</div>
	</div>
</div>
<!-- /Search Filter -->

<p class=" text-center" *ngIf="waiting">
	<img src="../../../../../assets/img/loader.gif" height="30px" alt>
</p>

<!-- <p>
     <button (click)="backClicked()" class="btn btn-primary me-2"
                        style="color: #035858 !important; background-color: #ffff !important;">
                        <i class="fas fa-arrow-left"></i> {{ 'back' | translate }}
     </button>
  </p> -->

<div class="row" *ngIf="!waiting">
	<div class="card-table">
		<div class="card-body">
			<div class="table-responsive">
				<div class="table-scroll">
					<table matSort (matSortChange)="sortData($event)"
						class="table table-stripped table-hover datatable">
						<thead class="thead-light">
							<tr>
								<th mat-sort-header="user">{{'user.user' | translate }}</th>
								<th mat-sort-header="email">{{'user.email' | translate }}</th>
								<th mat-sort-header="phone">{{'user.phone' | translate }}</th>
								<th mat-sort-header="nombre de role"> Nombre de Role </th>
								<th mat-sort-header="role"> Role </th>
								<th mat-sort-header="actions">Actions</th>
							</tr>
						</thead>
						<tbody>
							<tr *ngFor="let customer of dataSource.data; let i = index;">
								<td>
									<h2 class="table-avatar">
										<span class="avatar avatar-sm me-2"><img
												class="avatar-img rounded-circle"
												src="../../../../../assets/img/3dAvatar.png"
												alt="User Image" /></span>
										<span>{{ customer.firstName }} {{ customer.lastName }}</span>
									</h2>
								</td>
								<td>{{ customer.email }}</td>
								<td>{{ customer.phoneNumber }}</td>
								<td>role</td>
								<td>role</td>
								<td class="d-flex align-items-center">
									<div class="dropdown dropdown-action">
										<a href="javascript:void(0);" class="btn-action-icon"
											data-bs-toggle="dropdown"
											aria-expanded="false"><i class="fas fa-ellipsis-v"></i></a>
										<div class="dropdown-menu dropdown-menu-right">
											<ul>
												<li>
													<a class="dropdown-item" href="javascript:void(0);"><i
															class="far fa-edit me-2"></i>Edit</a>
												</li>
												<li>
													<a class="dropdown-item" href="javascript:void(0);"><i
															class="far fa-trash-alt me-2"></i>Delete</a>
												</li>
												<li>
													<a class="dropdown-item" href="javascript:void(0);"><i
															class="far fa-eye me-2"></i>View</a>
												</li>
												<li>
													<a class="dropdown-item" href="javascript:void(0);"><i
															class="far fa-bell me-2"></i>Active</a>
												</li>
												<li>
													<a class="dropdown-item" href="javascript:void(0);"><i
															class="far fa-bell-slash me-2"></i>Deactivate</a>
												</li>
											</ul>
										</div>
									</div>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
			<app-custom-pagination
				(pageChange)="onPageChange($event)"></app-custom-pagination>
		</div>
	</div>
</div>

<div class="modal custom-modal fade" id="AddRole" role="dialog">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title"> Liste des roles </h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal"
					aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<p class="text-center" *ngIf="roleService.waitingResponse">
					<img src="../../../../../assets/img/loader.gif" alt height="30px">
				</p>
				<div class="card card-table" *ngIf="!roleService.waitingResponse">
					<div class="card-body">
						<div class="table-responsive">
							<table datatable class="table table-stripped table-hover">
								<thead class="thead-light">
									<tr>
										<th>Name</th>
										<th style="padding-left: 7%;">Description </th>
										<th class="text-center">Active</th>
									</tr>
								</thead>
								<tbody *ngIf="roleService.listRoleOfUser.length != 0">
									<tr *ngFor="let role of roleService.listRole; let i = index">
										<td>

											<span
												style="width: 160px; display: flex;text-wrap: wrap;align-items: center;">
												<i style="margin-right: 12px;color: #0c4b8e;"
													class="fa fa-user" aria-hidden="true"
													data-toggle="tooltip" data-placement="top"
													title="add role on this user"></i>
												{{ role.name }} </span>

										</td>

										<td style="padding-left: 7%;">

											<span
												style="width: 185px; display: flex;text-wrap: wrap;align-items: center;">

												<i style="margin-right: 12px;color: #308e0c;"
													class="fa fa-align-left" aria-hidden="true"
													data-toggle="tooltip" data-placement="top"
													title="add role on this user"></i>
												{{ role.description }}

											</span>

										</td>

										<td class="text-center">
											<div class="form-check text-center"
												style="margin-left: 50%;">
												<input class="form-check-input"
													[(ngModel)]="role.checked" type="checkbox"
													[checked]="role.isEnable" value id="flexCheckDefault"
													(change)="updateCheckboxState(role)">

											</div>
										</td>
									</tr>
								</tbody>
								<tbody *ngIf="roleService.listRoleOfUser.length == 0">
									<tr>
										<td></td>
										<td class="text-center">
											<img src="../../../../../assets/img/no_result.gif"
												alt="No result" style="max-width: 150px;">
											<br>Aucun Role !
										</td>
										<td></td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>

			</div>

			<div class="modal-footer text-center">
				<button type="button" class="btn btn-secondary" (click)="reset()"
					data-bs-dismiss="modal" id="cancel-btn2">
					{{ 'close' | translate }}
				</button>
				<button type="button" class="btn btn-primary"
					[disabled]="roleService.isSaveButtonIsDisabled"
					*ngIf="!roleService.roleAdded" (click)="addRoleOnUser()">
					<span *ngIf="!loader">Sauvegarder <i class="fa fa-save"
							aria-hidden="true"></i></span>
					<span *ngIf="loader"><img src="../../../../../assets/img/loader.gif"
							alt width="30px"></span>
				</button>

			</div>
		</div>
	</div>